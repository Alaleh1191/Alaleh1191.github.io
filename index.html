<!DOCTYPE html>
<html>
	<head>
		<!-- Styling -->
		<link href="style.css" rel="stylesheet">
		
		<link href="flat/blue.css" rel="stylesheet">

		<link href='//fonts.googleapis.com/css?family=Capriola' rel='stylesheet'>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />

	</head>
	<body>
		<h1 style="margin:auto;text-align:center;">TraC: Transcript Consensus</h1>
		<p style="margin:auto;text-align: center;">TraC is a tool for finding consensus sites in splice variants of a single gene or a set of closely related genes.  Splice variants and sequences are drawn from the <a href="http://www.ensembl.org"> Ensembl</a> database.  The algorithm is described in a manuscript in preparation.</p>
			<div>
				<form>
					<span>Please enter the sequence for transcript:</span><br/>
					<div id = "SVs" style="position:relative">
						<span class= "1"> Name: </span>
						<input type="text" name="name1" class="1" value="1" onfocus="onFocus(this)" onblur="onBlur(this)">
						<span class= "1"> Sequence: </span>
						<textarea class ="SV 1" style="width: 525px;  height: 13px; margin-bottom: -5px"></textarea>
						<!-- these images are taken from http://tdyln.me/tdyln-0065-x-10-july-2015/-->
						<img class = "del 1" onclick="removeSV(this)" src="x-button.png" alt="delete" height="19px" style= "margin-bottom:-5px" title="delete this transcript">
						<br class = "1"/>
						<span class = "2"> Name: </span>
						<input type="text" name="name2" class="2" value="2" onfocus="onFocus(this)" onblur="onBlur(this)">
						<span class= "2"> Sequence: </span>
						<textarea class ="SV 2"  style="width: 525px; height: 13px; margin-bottom: -5px"></textarea>
						<img class ="del 2" onclick="removeSV(this)" src="x-button.png" alt="delete" height="19px" style= "margin-bottom:-5px">
						<br class = "2"/>
					</div>
					<img onclick="addSV()" src='http://www.clker.com/cliparts/e/6/d/7/1194994263582955302add.svg.thumb.png' alt='Addition Plus Sign clip art' style="position: relative;" height= "20px"/><br class="addSV"/>
					<span> Alternatively select a transcript by selecting a gene and species (ENSEMBL):</span> <br/>
					<span> Species: </span>
					<select id="species"></select>
					<span> Gene: </span>
					<input type="text" id="gene"/>
					<input type="button" value="Select Species and Gene" class="button1" onclick="searchForGene();"/> <br/>
					<select id="transcripts"></select>
					<input type="button" value="Add Transcript to the list" class="button1" onclick="searchForTranscript();"/><br/>
					<span>Please enter the minimum length of a share sequence: </span>
					<input type="text" name="minLength" id='minLength' value="20" onfocus="if (this.value==20) this.value = ''" onblur="if (this.value=='') this.value = 20"><br/>
					<span style="margin-right: 15px">Weight Probes by:</span>
					<input type="radio" name="weight" value="length" checked> Length of the Probe <span style="margin-left: 15px"></span>
  					<input type="radio" name="weight" value="shared"> Number of Transcripts Containing the Probe<br/>
  					<span>(Optional) Check to see if this subsequence is shared among any of the given transcripts:</span>
					<textarea id="reverse" style="width: 525px;  height: 13px; margin-bottom: -5px"></textarea>
				</form>
				<input type="button" value="Submit" onclick="chordData();" class="btn btn-primary button">
			</div>
				<!-- Special Thanks to https://www.behance.net/gallery/31234507/Free-Loading-Icons-Vol-1 -->
				<div style="margin-top:10px;margin-left:5px;display:none;" id="loadingChord">
					<img src="gif/Skate-128px.gif" alt="Skate" style="float:left;"/>
					<img src="gif/Replace-128px.gif" alt="Replace" style="float:left;margin-left:10px;"/>
					<img src="gif/Jumbing-Balls-128px.gif" alt="Jumping Balls" style="float:left; margin-left:10px;"/>
					<img src="gif/Puzzle-128px.gif" alt="Puzzle" style="float:left; margin-left:10px;"/>
					<img src="gif/Orbit-128px.gif" alt="Orbit" style="float:left; margin-left:10px;"/>
				</div>

			<div  style="width: 525px;white-space: pre-wrap;word-wrap: break-word;"><span id = "results"></span></div>
			<div id="sv-chart" style="width: 700px; float: left; position: absolute;"></div>
			<div style="width: 500px;" id="probeLoc">  </div>

			<div style="margin-left: 750px; ">
				<span style="display:none;" id="title_probe">Probe:</span>
				<span style="display:none;" id="title">Please click on the probe to get its sequence</span>
				<textarea id="probe" style="display: none;text-anchor: middle;width: 500px; height:400px; word-wrap: break-word" readonly></textarea>
			</div>

			<script src="jquery-1.12.4.min.js"></script>

			<!-- D3 v4 -->
			<script src="https://d3js.org/d3.v4.min.js"></script>

			<!-- Custom "chord" and "ribbon" functions -->
			<script src="arc.js"></script>
			<script src="chord.js"></script>
			<script src="icheck.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
			<script src="script.js"></script>
			<script src="diagram.js"></script>
            <script src="chordComputation.js"></script>

			<script type="text/javascript" src="ensemble.js"></script>
			<script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-93557809-1', 'auto');
                ga('send', 'pageview');

			</script>
	</body>
</html>
